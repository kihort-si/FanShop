<UserControl x:Class="FanShop.View.EditTaskCategoriesControl"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:local="clr-namespace:FanShop.View"
             xmlns:utils="clr-namespace:FanShop.Utils"
             mc:Ignorable="d">
    <Grid>
        <Grid.RowDefinitions>
           <RowDefinition Height="Auto"/>
           <RowDefinition Height="*"/>
           <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>
        <Border Grid.Row="0" Background="#F2F9FF" Padding="15">
           <TextBlock Text="{Binding SelectedCategory, Converter={x:Static local:CategoryTitleConverter.Instance}}"
                                 FontSize="16" FontWeight="SemiBold"
                                 Foreground="#333333" HorizontalAlignment="Center"/>
        </Border>

        <StackPanel Grid.Row="1" Margin="20,10">
           <TextBlock Text="Название категории*:" FontWeight="Medium" Foreground="#333333" Margin="0,0,0,5"/>
           <Border Background="#F8F9FA" BorderBrush="#E0E0E0" BorderThickness="1"
                   CornerRadius="4" Padding="10,8" Margin="0,0,0,15">
               <TextBox Text="{Binding Name, UpdateSourceTrigger=PropertyChanged}"
                        BorderThickness="0" Background="Transparent" FontSize="14"
                        utils:KeyboardNavigation.EnableArrowNavigation="True"/>
           </Border>

           <TextBlock Text="Описание:" FontWeight="Medium" Foreground="#333333" Margin="0,0,0,5"/>
           <Border Background="#F8F9FA" BorderBrush="#E0E0E0" BorderThickness="1"
                   CornerRadius="4" Padding="10,8" Margin="0,0,0,15">
               <TextBox Text="{Binding Description, UpdateSourceTrigger=PropertyChanged}"
                        BorderThickness="0" Background="Transparent" FontSize="14"
                        TextWrapping="Wrap" AcceptsReturn="True" Height="70"
                        utils:KeyboardNavigation.EnableArrowNavigation="True"/>
           </Border>
           
           <TextBlock Text="Задача по умолчанию:" FontWeight="Medium" Foreground="#333333" Margin="0,0,0,5"/>
           <Border Background="#F8F9FA" BorderBrush="#E0E0E0" BorderThickness="1"
                   CornerRadius="4" Padding="10,8" Margin="0,0,0,15">
               <TextBox Text="{Binding DefaultTask, UpdateSourceTrigger=PropertyChanged}"
                        BorderThickness="0" Background="Transparent" FontSize="14"
                        utils:KeyboardNavigation.EnableArrowNavigation="True"/>
           </Border>
           
           <StackPanel Margin="0,0,0,10">
               <TextBlock Text="Цвет*:" FontWeight="Medium" Foreground="#333333" Margin="0,0,0,5"/>
               <StackPanel Orientation="Horizontal">
                   <Button Width="30" Height="30" Margin="0,0,10,0" 
                           Command="{Binding OpenColorPickerCommand}"
                           Background="Transparent" BorderThickness="0" Padding="0">
                       <Rectangle Width="30" Height="30" Stroke="Black" StrokeThickness="1">
                           <Rectangle.Fill>
                               <SolidColorBrush Color="{Binding Color}"/>
                           </Rectangle.Fill>
                       </Rectangle>
                   </Button>
                   <TextBox Text="{Binding Color, UpdateSourceTrigger=PropertyChanged}" 
                            Width="100" Height="30" Padding="5" BorderBrush="#009EE1" VerticalAlignment="Top"/>
                   <Button Content="🎨" Width="30" Height="30" Margin="5,0,0,0"
                           Command="{Binding GenerateRandomColorCommand}" 
                           Background="#009EE1" Foreground="White" BorderThickness="0" Cursor="Hand"/>
               </StackPanel>
           </StackPanel>
           
           <TextBlock Text="* - обязательные поля" 
                      FontSize="10" Foreground="Gray" Margin="0,0,0,10"/>
        </StackPanel>

        <Border Grid.Row="2" Background="#F5F5F5" CornerRadius="0,0,8,8" Padding="0, 18, 0, 18">
           <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
               <Button Content="Сохранить" Width="120" Height="36"
                       Background="#009EE1" Foreground="White"
                       BorderThickness="0" Margin="0,0,15,0" Cursor="Hand"
                       Command="{Binding SaveEditedCategoryCommand}"
                       IsEnabled="{Binding CanSaveCategory}">
                   <Button.Template>
                       <ControlTemplate TargetType="Button">
                           <Border Background="{TemplateBinding Background}"
                                   CornerRadius="4" Padding="12,6">
                               <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                           </Border>
                       </ControlTemplate>
                   </Button.Template>
                   <Button.Style>
                       <Style TargetType="Button">
                           <Style.Triggers>
                               <Trigger Property="IsEnabled" Value="False">
                                   <Setter Property="Opacity" Value="0.5"/>
                               </Trigger>
                               <Trigger Property="IsMouseOver" Value="True">
                                   <Setter Property="Opacity" Value="0.9"/>
                               </Trigger>
                           </Style.Triggers>
                       </Style>
                   </Button.Style>
               </Button>

               <Button Content="Отмена" Width="120" Height="36"
                       Background="#666666" Foreground="White"
                       BorderThickness="0" Margin="0" Cursor="Hand"
                       Command="{Binding CancelEditCommand}">
                   <Button.Template>
                       <ControlTemplate TargetType="Button">
                           <Border Background="{TemplateBinding Background}"
                                   CornerRadius="4" Padding="12,6">
                               <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                           </Border>
                       </ControlTemplate>
                   </Button.Template>
                   <Button.Style>
                       <Style TargetType="Button">
                           <Style.Triggers>
                               <Trigger Property="IsMouseOver" Value="True">
                                   <Setter Property="Opacity" Value="0.9"/>
                               </Trigger>
                           </Style.Triggers>
                       </Style>
                   </Button.Style>
               </Button>
           </StackPanel>
        </Border>
        </Grid>
</UserControl>
